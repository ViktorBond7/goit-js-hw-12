{"version":3,"file":"commonHelpers.js","sources":["../src/renderImg.js","../src/newApi.js","../src/main.js"],"sourcesContent":["function hitTemplate(hit) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = hit;\n\n  return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n           <img class=\"gallery-image\"\n           src=\"${webformatURL}\"\n           alt=\"${tags}\"\n           />\n          </a>\n          <div class=\"description\">\n          <p><b>Likes</b>${likes}</p>\n          <p><b>Views</b>${views}</p>\n          <p><b>Comments</b>${comments}</p>\n          <p><b>Downloads</b>${downloads}</p>\n          </div>\n        </li>`;\n}\n\nexport function hitsTemplate(hits) {\n  return hits.map(hitTemplate).join('');\n}\n","import axios from 'axios';\n\nexport async function fetchHits(query, currentPage, per_page) {\n  const API_KEY = '41712066-bd7b5e249df7a86bd45ef70ea';\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const url = `${BASE_URL}`;\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: per_page,\n    page: currentPage,\n  };\n\n  const res = await axios.get(BASE_URL, { params });\n  return res.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { hitsTemplate } from './renderImg';\nimport { fetchHits } from './newApi';\n\nconst refs = {\n  searchFormRes: document.querySelector('.form'),\n  imageGalleryRes: document.querySelector('.gallery'),\n  btnLoadMore: document.querySelector('button[data-action=\"load-more\"]'),\n  loadElem: document.querySelector('.loader'),\n};\n\nconst styleRef = new SimpleLightbox('.gallery a', {\n  nav: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n});\n\n// ======================================\nlet query;\nlet page;\nlet maxPage;\nlet per_page = 15;\n\nrefs.searchFormRes.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\n\n// ======================================\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  query = e.target.elements.query.value.trim();\n  page = 1;\n\n  if (!query) {\n    showError('Empty field');\n    return;\n  }\n  showLoader();\n  try {\n    const data = await fetchHits(query, page, per_page);\n    if (data.totalHits === 0) {\n      iziToast.error({\n        position: 'topRight',\n        width: '10px',\n        message:\n          'Sorry, there are no images matching your search query. Please try again',\n      });\n      return;\n    }\n\n    maxPage = Math.ceil(data.totalHits / per_page);\n\n    refs.imageGalleryRes.innerHTML = '';\n    renderHits(data.hits);\n  } catch (err) {\n    showError(err);\n  }\n\n  hideLoader();\n  checkBtnVisibleStatus();\n  e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  showLoader();\n  const data = await fetchHits(query, page, per_page);\n  renderHits(data.hits);\n  hideLoader();\n  checkBtnVisibleStatus();\n\n  const height =\n    refs.imageGalleryRes.firstElementChild.getBoundingClientRect().height;\n\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n}\n\nfunction renderHits(hits) {\n  const markup = hitsTemplate(hits);\n  refs.imageGalleryRes.insertAdjacentHTML('beforeend', markup);\n  styleRef.refresh();\n}\n\nfunction showLoadBtn() {\n  refs.btnLoadMore.classList.remove('hidden');\n}\nfunction hideLoadBtn() {\n  refs.btnLoadMore.classList.add('hidden');\n}\n\nfunction showLoader() {\n  refs.loadElem.classList.remove('hidden');\n}\nfunction hideLoader() {\n  refs.loadElem.classList.add('hidden');\n}\n\nfunction showError(msg) {\n  iziToast.error({\n    title: 'Error',\n    message: msg,\n  });\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n    hideLoadBtn();\n    iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    showLoadBtn();\n  }\n}\n"],"names":["hitTemplate","hit","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hitsTemplate","hits","fetchHits","query","currentPage","per_page","API_KEY","BASE_URL","params","axios","refs","styleRef","SimpleLightbox","page","maxPage","onFormSubmit","onLoadMoreClick","e","showError","showLoader","data","iziToast","renderHits","err","hideLoader","checkBtnVisibleStatus","height","markup","showLoadBtn","hideLoadBtn","msg"],"mappings":"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"}